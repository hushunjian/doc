## 历史
|作者|日期|说明|
|:----|:----|:----|
|陈建文|2016/09/08|完成广告页面交互协议。|
|陈建文|2016/10/24|添加抽奖页面退出交互协议。|
|陈建文|2016/12/05|"添加王国创建界面交互协议；<br/> 添加王国跳转界面交互协议。"|
|陈建文|2016/12/08|"优化王国跳转界面交互协议；<br/> 在活动页面协议中添加关闭协议。"|
|陈建文|2016/12/08|"添加分享交互协议；<br/> 历史移到文档最后。"|
|陈建文|2016/12/12|添加打开个人信息详情。|
|陈建文|2016/12/12|为iOS在分享接口上增加cid字段。|
|陈建文|2016/12/14|添加关键字保存接口和读取接口。|
|陈建文|2016/12/15|"添加通知协议和调用协议区分；<br/> 添加应用返回通知和创建王国结果通知。"|
|陈建文|2016/12/18|添加用户信息获取接口。|
|陈建文|2017/01/05|"添加打开具体内容接口；<br/> 添加创建王国春节类型描述；<br/> 添加获取版本号接口。"|
|陈建文|2017/01/06|添加打开具体内容接口标题和封面图参数|
|陈建文|2017/05/24|添加友盟事件埋点方法|
|陈建文|2017/05/26|"添加分享选项QQ显示方法；<br/> 添加举报选项现实方法"|
|陈建文|2017/08/15|"添加标题设置方法；<br/> 添加隐藏、显示编辑按钮方法；<br/> 添加启动抽奖编辑界面方法；<br/> 添加启动原生输入框方法；<br/> 添加启动菜单方法；<br/> 添加分享按钮触发通知；<br/> 添加编辑按钮触发通知；<br/> 添加菜单按钮触发通知；<br/> 添加输入触发通知"|
|陈建文|2017/11/24|添加设置图片分享数据接口|

## 工作域定义
### 回调工作域定为meTomeApi。所谓回调工作域，是指由网页程序通过Javascript对原生应用方法进行调用的接口集合。原生应用接口的功能实现以及对Javascript的方法注入。
### 通知工作域定为meTomeH5Api。所谓通知工作域，是指由原生应用在特定时机调用的，由网页端实现的Javascript功能方法。


## 回调方法定义
### 显示、隐藏框架状态方法
|项目|说明|
|:------|:-----------------|
|方法名	|showFrame(show)|
|作用	|通过对参数show进行设置来控制原生框架的显示或隐藏。|
|参数说明|"参数show为数字类型|
|当show| 不为0时，显示原生框架；|
|当show| 为0时，隐藏原生框架。"|
|适用范围| 广告页面|
### 页面跳转方法
|项目|说明|
|:------|:-----------------|
|方法名| startPage(page，action)|
|作用| 根据参数page和action进行页面跳转。|
|参数说明| "参数page和action都为字符型<br/> 当page为”register”时，跳转至注册页面。此时action参数不起作用；<br/> 当show为”login”时，若action参数为空，则跳转至原生登录页面；<br/> 当show为”login”时，若action参数为”wechat”，则调用微信登录，若出现调用失败不跳转；<br/> 当show为”login”时，若action参数为”qq”，则调用QQ登录。若出现调用失败则不跳转；<br/> 其他情况，无反应。"|
|适用范围| 广告页面|
### 关闭页面方法
|项目|说明|
|:------|:-----------------|
|方法名| exit()|
|作用| 关闭当前页面。|
|参数说明| 无参数。|
|适用范围| 全部页面|
## 活动页面包含如下协议
### 创建王国方法
|项目|说明|
|:------|:-----------------|
|方法名| startKingdomCreateActivity(type, slogen,fuid)|
|作用| 打开王国创建页面|
|参数说明| "参数type为数字类型，创建页面类型<br/> 0：基本类型（默认）;<br/> 1：为活动单人王国；<br/> 2：为活动配对王国；<br/> 3：为春节王国<br/> 参数slogen文本类型，显示在首次输入内容的上的默认口号，为空时显示默认文案。<br/> 参数fuid为数字类型(long)，在活动配对王国中使用(type等于2时)，为与国王配对人选的个人唯一索引。"|
|适用范围| 全部页面|

### 跳转王国方法
|方法名| startKingdomDetailActivity(topicId, fid)|
|作用| 打开王国详情页面|
|参数说明| "参数topicId为数字类型（long），王国唯一索引。<br/> 参数fid是王国跳转位置的内容id。 小于0的数会使详情业使用默认显示方式，大于0的数会使详情页跳转至准确会接近位置。"|
|适用范围| 全部页面|

### 分享方法
|项目|说明|
|:------|:-----------------|
|方法名| share(url, title, image,cid)|
|作用| 打开分享菜单|
|参数说明| "参数url为分享的网页链接地址；<br/> 参数title是分享的标题，限制16字(QQ分享限制)，置空则显示活动标题；<br/> 参数image是分享图片的链接地址，不要用太大的图，否则会失败，置空则显示活动封面；<br/> 参数cid是内容<br/> id,此处用于确定举报对象（for iOS）。"|
|适用范围| 全部页面|

### QQ分享显示控制方法
|项目|说明|
|:------|:-----------------|
|方法名| enableQQ(s)|
|作用| 控制QQ分享项目显示与否|
|参数说明| 参数s,数字类型，0为显示QQ分享，其他隐藏QQ分享|
|适用范围| 全部页面|

### 举报显示控制方法
|项目|说明|
|:------|:-----------------|
|方法名| enableReport (s)|
|作用| 控制举报项目显示与否（不设置则默认显示）|
|参数说明| 参数s,数字类型，0为显示，其他隐藏|
|适用范围| 全部页面|

### 打开个人信息详情方法
|项目|说明|
|:------|:-----------------|
|方法名| startPersonalCenter (uid)|
|作用| 打开个人信息详情|
|参数说明| 参数uid是用户的唯一识别号|
|适用范围| 全部页面|

### 关键字保存方法
|项目|说明|
|:------|:-----------------|
|方法名| save(key, value)|
|作用| 保存以key值为索引的关键字数据|
|参数说明| "key 索引|
|value| 关键字数据"|
|适用范围| 全部页面|

### 关键字读取方法
|项目|说明|
|:------|:-----------------|
|方法名| load(key)|
|作用| 读取以key值为索引的关键字数据|
|参数说明| key 索引|
|返回| 关键字数据|
|适用范围| 全部页面|

### 用户信息获取方法
|项目|说明|
|:------|:-----------------|
|方法名| getCurrentUser()|
|作用| 获取用户信息|
|参数说明| 无参数|
|返回| "以减号相分隔的用户信息，包括用户唯一号和用户访问令牌。<br/> 例如318-awer342rexxxxxxx <br/> 其中，“318”是用户唯一号，“awer342rexxxxxxx”则是访问令牌。<br/> 当用户不存在，或者令牌无效时，该方法返回空字符串。"|
|适用范围| 全部页面|

### 打开内容方法
|项目|说明|
|:------|:-----------------|
|方法名| startDetailActivity(type, contentType, cid, uid, url, title, cover)|
|作用| 打开内容详情页|
|参数说明| "type为类型，具体如下：<br/> UGC（用户产生内容）<br/> 转发（保留未用）<br/> PGC（产品产生内容）<br/> 王国<br/> 活动<br/> 智能推荐<br/> 王国转发（保留未用）<br/> 活动转发（保留未用）<br/> PGC转发<br/> 智能推荐转发<br/> contentType为内容的类型，当类型为4（活动）时，0为普通活动，1为特殊活动。<br/> cid为内容的唯一索引。<br/> uid为内容所属用户唯一索引，当类型为0, 3, 5, 8, 9的时候，这个uid必须是正确并且有效的。<br/> url 是内容的地址，当类型为活动，智能推荐和智能推荐转发时使用<br/> title 标题<br/> cover 封面图"|
|返回| 无|
|适用范围| 全部页面|

### 获取版本号方法
|项目|说明|
|:------|:-----------------|
|方法名| version()|
|作用| 获取当前版本信息|
|参数说明| 无参数|
|返回| 以数字索引的版本信息，当前为1|
|适用范围| 全部页面|

### 友盟事件埋点方法
|项目|说明|
|:------|:-----------------|
|方法名| umeng(event)|
|作用| 获取当前版本信息|
|参数说明| event为事件名称，字符类型|
|返回| 无|
|适用范围| 全部页面|

### 标题设置方法
|项目|说明|
|:------|:-----------------|
|方法名| setTitle(title)|
|作用| 获取当前版本信息|
|参数| 说明title 标题文字|
|返回| 无|
|适用范围| 全部页面|

### 隐藏编辑按钮方法
|项目|说明|
|:------|:-----------------|
|方法名| showEditButton(s)|
|作用| 隐藏编辑按钮|
|参数说明| s 数字类型 0 隐藏 1显示|
|返回| 无|
|适用范围| 全部页面|

### 启动抽奖编辑界面方法
|项目|说明|
|:------|:-----------------|
|方法名| startRaffleEdit( raffleId, title, content, pwNum, endTime, state)|
|作用| 启动抽奖编辑界面|
|参数说明| "raffleId 抽奖索引<br/> title 抽奖标题<br/> content 抽奖内容文本<br/> pwNum (number of price winner)获奖人数<br/> endTime 抽奖结束时间<br/> state 抽奖状态<br/> 0 进行中；<br/> 1 倒计时结束；<br/> 2 抽奖结束"|
|返回| 无|
|适用范围| 全部页面|

### 启动原生输入框方法
|项目|说明|
|:------|:-----------------|
|方法名| startInput(sid, hint)|
|作用| 启动原生输入框|
|参数说明| "sid 输入框序列号（字符串）<br/> hint 默认提示文本（字符串）"|
|返回| 无|
|适用范围| 全部页面|

### 启动菜单界面方法
|项目|说明|
|:------|:-----------------|
|方法名| startMenu ( title, sid, menu)|
|作用| 启动菜单|
|参数说明| "title 标题<br/> sid 对象唯一索引（字符串）<br/> menu 菜单数据（JSON序列化的字符串）。它实际是一个数组，其内部数据如下<br/> 字段	类型	描述<br/> opid	字符	菜单选项的唯一索引<br/> text	字符	菜单选项上出现的文字<br/> color	字符	文字颜色，格式如下 #ffffffff, #ffffff, #fff<br/> 菜单数据最多支持6个，多于6个不做支持。"|
|返回| 无|
|适用范围| 全部页面|

### 设置分享图片方法
|项目|说明|
|:------|:-----------------|
|方法名| setShareImageUrl (url)|
|作用| 设置图片分享数据|
|参数说明| url 分享图片的链接地址，支持data:image数据。|
|返回| 无|
|适用范围| 全部页面|

## 通知方法定义

### 应用返回
|项目|说明|
|:------|:-----------------|
|方法名| resume (code, msg)|
|作用| 通知网页应用当前界面从其他界面返回，首次展现也会调用。|
|参数说明| "code 返回码|
|msg| 返回消息"|
|适用范围| 全部页面|

### 创建王国结果
|项目|说明|
|:------|:-----------------|
|方法名| createKingdomResult(resultCode)|
|作用| 通知网页应用王国对象是否创建。从创建王国界面返回时调用。|
|参数说明| "resultCode创建结果。<br/> 0x2000 创建成功<br/> 0x2001 创建取消"|
|适用范围| 全部页面|

### 分享按钮触发通知
|项目|说明|
|:------|:-----------------|
|方法名| onShareButtonClick()|
|作用| 通知网页应用分享按钮被用户触发，网页端需要按需调起分享菜单。|
|参数说明| 无|
|适用范围| 全部页面|

### 编辑按钮触发通知
|项目|说明|
|:------|:-----------------|
|方法名| onEditButtonClick()|
|作用| 通知网页应用分享按钮被用户触发，网页端需要按需调起编辑界面。|
|参数说明| 无|
|适用范围| 全部页面|

### 菜单按钮触发通知
|项目|说明|
|:------|:-----------------|
|方法名| onMenuClick(sid, opid)|
|作用| 通知网页应用菜单按钮被用户触发，网页端需要按照预定操作进行相应反应。|
|参数说明| "sid 启动菜单时对象所用的唯一识别号(字符串)<br/> opid 启动菜单时预先定义行为识别号(字符串)"|
|适用范围| 全部页面|

### 输入触发通知
|项目|说明|
|:------|:-----------------|
|方法名| onInput(sid, text)|
|作用| 通知网页应用原生输入框输入事件触发。|
|参数说明| "sid 唯一识别号(字符串)<br/> text 输入文字"|
|适用范围| 全部页面|

